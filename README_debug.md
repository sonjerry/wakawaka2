# ESC 모터 제어 디버깅 가이드

## 개요
이 프로그램은 라즈베리파이에서 PWM 신호를 통해 ESC(Electronic Speed Controller) 모듈을 제어하여 브러시리스 모터의 다양한 속도와 방향을 테스트하는 디버깅 도구입니다.

## 하드웨어 연결
```
라즈베리파이 GPIO 18번 핀 → ESC 모듈 PWM 입력
라즈베리파이 GND → ESC 모듈 GND
라즈베리파이 5V → ESC 모듈 VCC (필요시)
```

## PWM 신호 범위
| 펄스 폭 | 듀티 사이클 | 모터 상태 | 설명 |
|---------|-------------|-----------|------|
| 1000μs | 5.0% | 뒤로 최대 | 정지/최저 속도 (역방향 최대) |
| 1100μs | 5.5% | 뒤로 저속 | 매우 저속 역방향 |
| 1200μs | 6.0% | 뒤로 저속 | 저속 역방향 |
| 1300μs | 6.5% | 뒤로 중저속 | 중저속 역방향 |
| 1400μs | 7.0% | 뒤로 중저속 | 중저속 역방향 |
| 1500μs | 7.5% | 중립 | 정지 (중립) |
| 1600μs | 8.0% | 앞으로 중저속 | 중저속 정방향 |
| 1700μs | 8.5% | 앞으로 중저속 | 중저속 정방향 |
| 1800μs | 9.0% | 앞으로 저속 | 저속 정방향 |
| 1900μs | 9.5% | 앞으로 중속 | 중속 정방향 |
| 2000μs | 10.0% | 앞으로 최대 | 최고 속도 (정방향 최대) |

## 사용법

### 1. 프로그램 실행
```bash
python3 debug.py
```

### 2. ESC 아밍
프로그램 시작 시 자동으로 ESC 아밍이 수행됩니다:
1. 최대 펄스 (2000μs)로 2초간 신호 전송
2. 최소 펄스 (1000μs)로 2초간 신호 전송
3. 중립 (1500μs)으로 복귀

### 3. 대화형 제어
프로그램 실행 후 다음 명령어를 사용할 수 있습니다:

| 명령어 | 동작 | 펄스 폭 |
|--------|------|---------|
| `w` | 앞으로 최대 속도 | 2000μs |
| `s` | 뒤로 최대 속도 | 1000μs |
| `a` | 앞으로 저속 | 1600μs |
| `d` | 뒤로 저속 | 1400μs |
| `space` | 중립 (정지) | 1500μs |
| `t` | 전체 범위 테스트 | 1000~2000μs |
| `h` | 도움말 표시 | - |
| `q` | 프로그램 종료 | - |

### 4. 전체 범위 테스트
`t` 명령어를 입력하면 모든 펄스 폭 값에 대해 순차적으로 테스트합니다:
- 각 값마다 3초간 유지
- 1000μs부터 2000μs까지 100μs씩 증가
- 테스트 완료 후 중립으로 복귀

## 안전 주의사항

⚠️ **중요한 안전 수칙**:
1. **프로펠러나 바퀴가 연결된 상태에서는 절대 테스트하지 마세요**
2. **모터가 회전할 공간이 충분한지 확인하세요**
3. **ESC와 모터의 전원이 올바르게 연결되었는지 확인하세요**
4. **프로그램 종료 시 자동으로 중립 상태로 복귀됩니다**

## 문제 해결

### 1. GPIO 권한 오류
```bash
sudo usermod -a -G gpio $USER
# 로그아웃 후 다시 로그인
```

### 2. RPi.GPIO 모듈이 없는 경우
```bash
pip3 install RPi.GPIO
```

### 3. ESC가 응답하지 않는 경우
- ESC 아밍이 제대로 되었는지 확인
- PWM 핀 번호가 올바른지 확인 (기본값: 18번)
- ESC와 모터의 연결 상태 확인

## 코드 수정 사항

### PWM 핀 번호 변경
```python
esc = ESCController(pwm_pin=18)  # 원하는 핀 번호로 변경
```

### 테스트 값 범위 조정
```python
# 더 세밀한 테스트를 원하는 경우
test_values = [
    (1000, "정지"),
    (1050, "매우 저속 뒤로"),
    # ... 더 많은 값 추가
]
```

## 라이센스
이 코드는 교육 및 디버깅 목적으로 자유롭게 사용할 수 있습니다.
